"use strict";(self["webpackChunkproyecto_final_antonio"]=self["webpackChunkproyecto_final_antonio"]||[]).push([[503],{9503:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var o=a(6768),l=a(5130),r=a(4232);const c={id:"parte_izq",class:"md:w-[50%] h-full p-4"},s=(0,o.Lk)("h1",{class:"text-[#14c458] text-3xl"},"Métodos de pago",-1),d={class:"flex flex-col gap-4"},n=(0,o.Lk)("p",{class:"my-2"},"Seleccione método de pago",-1),i=["onClick"],m={class:"w-[30%]"},u=["src"],p={class:"w-[30%] h-full flex items-center justify-end"},h={key:0,class:"fa-solid fa-circle-check text-[#14c458] md:text-2xl"},b={key:0,id:"form_tarjeta",class:""},x=(0,o.Lk)("h1",{class:"text-[#14c458] my-2"},"Tarjeta",-1),f={class:"w-full md:flex"},g={class:"md:flex md:flex-col md:justify-center md:w-[50%] md:pl-8"},w=(0,o.Lk)("p",null,"Número de tarjeta",-1),k=(0,o.Lk)("label",{class:"text-sm italic mt-1 mb-2 text-gray-500"},[(0,o.Lk)("i",{class:"fa-solid fa-circle-info"}),(0,o.eW)(" Consta de 16 dígitos sin espacios")],-1),_=(0,o.Lk)("p",null,"Fecha de caducidad",-1),v=["min"],L=(0,o.Lk)("p",null,"Código CCV de tarjeta",-1),y=(0,o.Lk)("label",{class:"text-sm italic mt-1 mb-2 text-gray-500"},[(0,o.Lk)("i",{class:"fa-solid fa-circle-info"}),(0,o.eW)(" Consta de 3 dígitos")],-1),C={id:"parte_der_resumen",class:"md:w-[50%] h-full p-4"},j=(0,o.Lk)("h1",{class:"text-[#14c458] text-lg md:text-3xl mb-4"},"Resumen de la compra",-1),E={class:"w-full text-sm md:text-base"},V=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",{class:"w-full flex justify-between bg-teal-400 rounded-md p-2 md:p-4"},[(0,o.Lk)("th",{class:"w-[35%] text-start"},"Nombre"),(0,o.Lk)("th",{class:"w-[20%] text-start"},"Cocción"),(0,o.Lk)("th",{class:"w-[20%] text-end"},"Precio")])],-1),X={class:"mt-2 mb-4 flex flex-col gap-2 max-h-[54vh] overflow-scroll no-scrollbar"},A={class:"w-[35%]"},F={class:"w-[20%]"},I={class:"w-[20%] text-teal-400 text-end"},J={class:"border-t"},S={class:"bg-blend-lighten hover:bg-blend-darken flex justify-between text-xl font-bold p-2 md:p-4"},T=(0,o.Lk)("th",null,"Total",-1),U={class:"text-[#14c458]"},$={key:0,class:"flex flex-col w-full md:gap-2"},M=(0,o.Lk)("button",{type:"submit",class:"text-white w-[120px] h-[35px] rounded-md cursor-pointer hover:border hover:border-white-600 bg-gradient-to-br from-[#14c458] to-teal-400 my-6 ml-6"},"Pagar",-1);function P(e,t,a,P,q,D){const Q=(0,o.g2)("CardAtroposVue");return(0,o.uX)(),(0,o.CE)("form",{onSubmit:t[6]||(t[6]=(0,l.D$)(((...e)=>D.pagar_final&&D.pagar_final(...e)),["prevent"])),class:"bg-[#111015] h-auto min-h-[100vh] md:h-[100vh] text-white flex flex-col md:flex-row"},[(0,o.Lk)("div",c,[s,(0,o.Lk)("div",d,[n,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.metodos_pago,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,onClick:t=>D.cambiarMetodoPago(e),class:"border flex items-center justify-between h-[15vh] md:h-[10vh] md:w-[30vw] py-4 px-6 rounded-lg bg-[#22222a] hover:border-[#14c458]"},[(0,o.Lk)("p",m,(0,r.v_)(e.nombre),1),(0,o.Lk)("img",{src:e.logo,class:"w-[40%] md:w-[5vw]"},null,8,u),(0,o.Lk)("div",p,[q.metodo_pago.nombre==e.nombre?((0,o.uX)(),(0,o.CE)("i",h)):(0,o.Q3)("",!0)])],8,i)))),128))]),"Tarjeta"==q.metodo_pago.nombre?((0,o.uX)(),(0,o.CE)("div",b,[x,(0,o.Lk)("div",f,[(0,o.bF)(Q),(0,o.Lk)("div",g,[w,k,(0,o.bo)((0,o.Lk)("input",{type:"tel","onUpdate:modelValue":t[0]||(t[0]=e=>q.num_tarjeta=e),pattern:"[0-9]*",minlength:"16",maxlength:"16",placeholder:"xxxx xxxx xxxx xxxx",class:"p-1 rounded-md w-[90%] md:w-[90%] bg-[#111015] border border-[#14c458] mb-2"},null,512),[[l.Jo,q.num_tarjeta]]),_,(0,o.bo)((0,o.Lk)("input",{type:"month","onUpdate:modelValue":t[1]||(t[1]=e=>q.fecha_cad_tarjeta=e),min:q.fecha_actual,class:"p-1 my-2 rounded-md w-[90%] md:w-[90%] bg-[#111015] border border-[#14c458]"},null,8,v),[[l.Jo,q.fecha_cad_tarjeta]]),L,y,(0,o.bo)((0,o.Lk)("input",{type:"tel","onUpdate:modelValue":t[2]||(t[2]=e=>q.cod_ccv=e),pattern:"[0-9]*",min:"0",max:"999",minlength:"3",maxlength:"3",placeholder:"xxx",class:"p-1 rounded-md w-[90%] md:w-[50%] bg-[#111015] border border-[#14c458] mb-2"},null,512),[[l.Jo,q.cod_ccv]])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",C,[j,(0,o.Lk)("table",E,[V,(0,o.Lk)("tbody",X,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.carrito,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"w-full flex items-center justify-between bg-[#22222a] rounded-md p-2 md:p-4"},[(0,o.Lk)("td",A,(0,r.v_)(e.nombre),1),(0,o.Lk)("td",F,(0,r.v_)(e.coccion),1),(0,o.Lk)("td",I,(0,r.v_)(e.precio)+" €",1)])))),128))]),(0,o.Lk)("tfoot",J,[(0,o.Lk)("tr",S,[T,(0,o.Lk)("td",U,(0,r.v_)(e.pago_total)+" €",1)])])]),"Tarjeta"==q.metodo_pago.nombre?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.bo)((0,o.Lk)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[3]||(t[3]=e=>q.email=e),required:"",minlength:"5",maxlength:"30",class:"p-2 md:mt-2 mt-6 rounded-md w-full md:w-[60%] lg:w-[50%] bg-[#111015] border border-[#14c458]"},null,512),[[l.Jo,q.email]]),(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"Dirección","onUpdate:modelValue":t[4]||(t[4]=e=>q.direccion=e),required:"",minlength:"5",maxlength:"45",class:"p-2 md:mt-2 mt-6 rounded-md w-full md:w-[60%] lg:w-[50%] bg-[#111015] border border-[#14c458]"},null,512),[[l.Jo,q.direccion]])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>D.volverInicio&&D.volverInicio(...e)),class:"text-white w-[120px] h-[35px] rounded-md cursor-pointer hover:border hover:border-white-600 bg-slate-500 my-6"},"Cancelar"),M])],32)}a(4114);var q=a(782),D=a(7411),Q=a(4373);const z=["src"];function H(e,t,a,l,r,c){const s=(0,o.g2)("atropos-component");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(s,{class:"my-atropos","active-offset":"40","shadow-scale":"1.05"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"w-[70vw] md:w-[20vw] mb-2",src:r.credit_card_img},null,8,z)])),_:1})])}var K=a(295),N={name:"CardAtroposVue",data(){return{credit_card_img:K}}},R=a(1241);const W=(0,R.A)(N,[["render",H]]);var B=W,Y={components:{CardAtroposVue:B},data(){return{metodo_pago:{id:-1,nombre:"default"},num_tarjeta:null,fecha_cad_tarjeta:null,cod_ccv:null,fecha_actual:this.obtenerFechaActual(),email:null,direccion:null}},computed:{...(0,q.aH)(["metodos_pago","carrito","pago_total"])},setup(){const e=(0,D.dj)();return{toast:e}},methods:{async pagar_final(){if("default"==this.metodo_pago.nombre)this.toast.warning("Selecciona método de pago");else if("Tarjeta"==this.metodo_pago.nombre)if(null!=this.num_tarjeta&&null!=this.fecha_cad_tarjeta&&null!=this.cod_ccv)try{const e=await Q.A.post("/api/products/cart/sendBill",{destinatario:this.email,direccion:this.direccion,pago_total:this.pago_total}),t=e.data;"success"==t.mensaje?(this.toast.success("Compra realizada!, la factura le llegará a su correo",{timeout:2e3}),this.$router.push({name:"inicio"})):this.toast.warning(t.mensaje,{timeout:2e3})}catch(e){this.toast.error("Ha habido un error:",e)}else this.toast.warning("Rellena todos los campos correctamente");else window.location.href=this.metodo_pago.enlace_web},cambiarMetodoPago(e){this.metodo_pago=e},volverInicio(){this.$router.push({name:"inicio"})},obtenerFechaActual(){const e=new Date,t=e.getFullYear(),a=e.getMonth()+1;return`${t}-${a.toString().padStart(2,"0")}`}}};const G=(0,R.A)(Y,[["render",P]]);var O=G}}]);
//# sourceMappingURL=503.63e013a1.js.map