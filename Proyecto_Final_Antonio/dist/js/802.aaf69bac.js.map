{"version":3,"file":"js/802.aaf69bac.js","mappings":"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","sources":["webpack://proyecto_final_antonio/./src/views/PagoView.vue","webpack://proyecto_final_antonio/./src/components/CardAtroposVue.vue","webpack://proyecto_final_antonio/./src/components/CardAtroposVue.vue?9f84","webpack://proyecto_final_antonio/./src/views/PagoView.vue?9d0e"],"sourcesContent":["<template>\r\n\r\n  <form @submit.prevent=\"pagar_final\" class=\"bg-[#111015] h-auto min-h-[100vh] md:h-[100vh] text-white flex flex-col md:flex-row\">\r\n\r\n    <div id=\"parte_izq\" class=\"md:w-[50%] h-full p-4\">\r\n    \r\n      <h1 class=\"text-[#14c458] text-3xl\">Métodos de pago</h1>\r\n      <div class=\"flex flex-col gap-4\">\r\n        <p class=\"my-2\">Seleccione método de pago</p>\r\n        <div v-for=\"met in metodos_pago\" :key=\"met.id\" @click=\"cambiarMetodoPago(met)\" class=\"border flex items-center justify-between h-[15vh] md:h-[10vh] md:w-[30vw] py-4 px-6 rounded-lg bg-[#22222a] hover:border-[#14c458]\">\r\n          <p class=\"w-[30%]\">{{ met.nombre }}</p>\r\n          <img :src=\"met.logo\" class=\"w-[40%] md:w-[5vw]\">\r\n          <div class=\"w-[30%] h-full flex items-center justify-end\">\r\n            <i v-if=\"metodo_pago.nombre==met.nombre\" class=\"fa-solid fa-circle-check text-[#14c458] md:text-2xl\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"metodo_pago.nombre=='Tarjeta'\" id=\"form_tarjeta\" class=\"\">\r\n        <h1 class=\"text-[#14c458] my-2\">Tarjeta</h1>\r\n        <div class=\"w-full md:flex\">\r\n          <CardAtroposVue></CardAtroposVue>\r\n          <div class=\"md:flex md:flex-col md:justify-center md:w-[50%] md:pl-8\">\r\n            <p>Número de tarjeta</p>\r\n            <label class=\"text-sm italic mt-1 mb-2 text-gray-500\"><i class=\"fa-solid fa-circle-info\"></i> Consta de 16 dígitos sin espacios</label>\r\n            <input type=\"tel\" v-model=\"num_tarjeta\" pattern=\"[0-9]*\" minlength=\"16\" maxlength=\"16\" placeholder=\"xxxx xxxx xxxx xxxx\" class=\"p-1 rounded-md w-[90%] md:w-[90%] bg-[#111015] border border-[#14c458] mb-2\">\r\n            <p>Fecha de caducidad</p>\r\n            <input type=\"month\" v-model=\"fecha_cad_tarjeta\" :min=\"fecha_actual\" class=\"p-1 my-2 rounded-md w-[90%] md:w-[90%] bg-[#111015] border border-[#14c458]\">\r\n            <p>Código CCV de tarjeta</p>\r\n            <label class=\"text-sm italic mt-1 mb-2 text-gray-500\"><i class=\"fa-solid fa-circle-info\"></i> Consta de 3 dígitos</label>\r\n            <input type=\"tel\" v-model=\"cod_ccv\" pattern=\"[0-9]*\" min=\"0\" max=\"999\" minlength=\"3\" maxlength=\"3\" placeholder=\"xxx\" class=\"p-1 rounded-md w-[90%] md:w-[50%] bg-[#111015] border border-[#14c458] mb-2\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div id=\"parte_der_resumen\" class=\"md:w-[50%] h-full p-4\">\r\n      \r\n      <h1 class=\"text-[#14c458] text-lg md:text-3xl mb-4\">Resumen de la compra</h1>\r\n      <table class=\"w-full text-sm md:text-base\">\r\n        <thead>\r\n          <tr class=\"w-full flex justify-between bg-teal-400 rounded-md p-2 md:p-4\">\r\n            <th class=\"w-[35%] text-start\">Nombre</th>\r\n            <th class=\"w-[20%] text-start\">Cocción</th>\r\n            <th class=\"w-[20%] text-end\">Precio</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody class=\"mt-2 mb-4 flex flex-col gap-2 max-h-[58vh] overflow-scroll no-scrollbar\">\r\n          <tr v-for=\"prod in carrito\" :key=\"prod.id\" class=\"w-full flex items-center justify-between bg-[#22222a] rounded-md p-2 md:p-4\">\r\n            <td class=\"w-[35%]\">{{ prod.nombre }}</td>\r\n            <td class=\"w-[20%]\">{{ prod.coccion }}</td>\r\n            <td class=\"w-[20%] text-teal-400 text-end\">{{ prod.precio }} €</td>\r\n          </tr>\r\n        </tbody>\r\n        <tfoot class=\"border-t\">\r\n          <tr class=\"bg-blend-lighten hover:bg-blend-darken flex justify-between text-xl font-bold p-2 md:p-4\">\r\n            <th>Total</th>\r\n            <td class=\"text-[#14c458]\">{{ pago_total }} €</td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n      <div>\r\n        <input v-if=\"metodo_pago.nombre=='Tarjeta'\" type=\"email\" placeholder=\"Email\" v-model=\"email\" required class=\"p-2 md:mt-2 mt-6 rounded-md w-full md:w-[50%] bg-[#111015] border border-[#14c458]\">\r\n      </div>\r\n      <button @click=\"volverInicio\" class=\"text-white w-[120px] h-[35px] rounded-md cursor-pointer hover:border hover:border-white-600 bg-slate-500 my-6\">Cancelar</button>\r\n      <button type=\"submit\" class=\"text-white w-[120px] h-[35px] rounded-md cursor-pointer hover:border hover:border-white-600 bg-gradient-to-br from-[#14c458] to-teal-400 my-6 ml-6\">Pagar</button>\r\n    </div>\r\n\r\n  </form>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport { useToast } from \"vue-toastification\";\r\nimport axios from 'axios';\r\n// atropos\r\nimport CardAtroposVue from '@/components/CardAtroposVue.vue';\r\n\r\nexport default {\r\n  components: { CardAtroposVue },\r\n  data(){\r\n    return {\r\n      metodo_pago: { id: -1, nombre: 'default' },\r\n      num_tarjeta: null,\r\n      fecha_cad_tarjeta: null,\r\n      cod_ccv: null,\r\n      fecha_actual: this.obtenerFechaActual(),\r\n      email: null\r\n    }\r\n  },\r\n  computed:{\r\n    ...mapState(['metodos_pago', 'carrito', 'pago_total'])\r\n  },\r\n  setup() {\r\n      const toast = useToast();      \r\n      return { toast }\r\n  },\r\n  methods:{\r\n    async pagar_final() {\r\n      if (this.metodo_pago.nombre == 'default') {\r\n        this.toast.warning(\"Selecciona método de pago\")\r\n      } \r\n      else if (this.metodo_pago.nombre == 'Tarjeta'){\r\n        if (this.num_tarjeta!=null && this.fecha_cad_tarjeta!=null && this.cod_ccv!=null) {\r\n          // Peticion para enviar la factura\r\n          try {\r\n            const res = await axios.post('/api/products/cart/sendBill',\r\n                    {\r\n                        destinatario: this.email,\r\n                        pago_total: this.pago_total\r\n                    }\r\n                )\r\n\r\n                const datos = res.data\r\n\r\n                if(datos.estado == 'success'){\r\n                    this.toast.success(datos.mensaje, { timeout: 2000, });\r\n                } else {\r\n                    this.toast.warning(datos.mensaje, { timeout: 2000, });\r\n                }\r\n            } catch (error) {\r\n                this.toast.error('Ha habido un error:', error);\r\n            }\r\n\r\n        } else {\r\n          this.toast.warning(\"Rellena todos los campos correctamente\")\r\n        }\r\n      } \r\n      else {\r\n        window.location.href = this.metodo_pago.enlace_web // redirigir cuando no se paga con tarjeta\r\n      }\r\n    },\r\n    cambiarMetodoPago(metodo){\r\n      this.metodo_pago = metodo\r\n    },\r\n    volverInicio(){\r\n      this.$router.push( {name: 'inicio'} )\r\n    },\r\n    obtenerFechaActual(){\r\n      const today = new Date();\r\n      const year = today.getFullYear();\r\n      const month = today.getMonth() + 1; //meses js estan en array desde 0\r\n      return `${year}-${month.toString().padStart(2, '0')}`; //formato YYYY-MM\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n\r\n</style>","<template>\r\n  \r\n  <div>\r\n\r\n    <atropos-component class=\"my-atropos\"\r\n      active-offset=\"40\"\r\n      shadow-scale=\"1.05\"\r\n    >\r\n      <img\r\n        class=\"w-[70vw] md:w-[20vw] mb-2\"\r\n        :src=\"credit_card_img\"\r\n      />\r\n    </atropos-component>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport credit_card_img from '@/assets/credit_card_img.webp';\r\n\r\nexport default {\r\n  name: 'CardAtroposVue',\r\n  data() {\r\n    return {\r\n      credit_card_img\r\n    };\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./CardAtroposVue.vue?vue&type=template&id=bf74f7e2\"\nimport script from \"./CardAtroposVue.vue?vue&type=script&lang=js\"\nexport * from \"./CardAtroposVue.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PagoView.vue?vue&type=template&id=22a0d975\"\nimport script from \"./PagoView.vue?vue&type=script&lang=js\"\nexport * from \"./PagoView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","class","_createElementVNode","key","_createTextVNode","type","_createElementBlock","onSubmit","_cache","_withModifiers","args","$options","pagar_final","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","_ctx","metodos_pago","met","onClick","$event","cambiarMetodoPago","_hoisted_6","_toDisplayString","nombre","src","logo","_hoisted_7","_hoisted_8","$data","metodo_pago","_hoisted_9","_createCommentVNode","_hoisted_5","_hoisted_10","_hoisted_11","_hoisted_12","_createVNode","_component_CardAtroposVue","_hoisted_13","_hoisted_14","_hoisted_15","num_tarjeta","pattern","minlength","maxlength","placeholder","_hoisted_16","fecha_cad_tarjeta","min","fecha_actual","_hoisted_17","_hoisted_18","_hoisted_19","cod_ccv","max","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","carrito","prod","_hoisted_25","_hoisted_26","coccion","_hoisted_27","precio","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","pago_total","email","required","volverInicio","_hoisted_32","_component_atropos_component","default","_withCtx","credit_card_img","_","name","data","__exports__","components","CardAtroposVue","this","obtenerFechaActual","computed","mapState","setup","toast","useToast","methods","warning","res","axios","post","destinatario","datos","estado","success","mensaje","timeout","error","window","location","href","enlace_web","metodo","$router","push","today","Date","year","getFullYear","month","getMonth","toString","padStart","render"],"sourceRoot":""}